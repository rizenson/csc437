<!DOCTYPE html>
<html>
  <head>
    <link
      href="https://fonts.googleapis.com/css?family=JetBrains Mono"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles/page.css" />
    <link rel="stylesheet" href="/styles/tokens.css" />
    <link rel="stylesheet" href="/styles/settings.css" />
    <script type="module" src="./rules.ts"></script>
    <script type="module" src="./settings.ts"></script>
    <script type="module" src="./mainGame.ts"></script>
    <script type="module" src="./user-profile.ts"></script>
    <script type="module" src="./log-in-button.ts"></script>
    <script>
      function showRules() {
        console.log("open rules");
        document
          .getElementById("rule-box")
          .shadowRoot.firstChild.nextSibling.classList.remove("show");
      }

      function showSettings() {
        console.log("open settings");
        document
          .getElementById("settings-box")
          .shadowRoot.firstChild.nextSibling.classList.remove("show");

        let darkMode = document.cookie
          .split("; ")
          .find((row) => row.startsWith("darkMode="))
          ?.split("=")[1];
        if (darkMode && darkMode == "true" ? true : false) {
          document
            .getElementById("settings-box")
            .shadowRoot.getElementById("darkMode").checked = "true";
        } else {
          document
            .getElementById("settings-box")
            .shadowRoot.getElementById("darkMode").checked = null;
        }

        let imageStyle = document.cookie
          .split("; ")
          .find((row) => row.startsWith("imageStyle="))
          ?.split("=")[1];

        console.log(imageStyle);
        document
          .getElementById("settings-box")
          .shadowRoot.getElementById("image-style").value =
          imageStyle;
      }
    </script>
  </head>
  <body>
    <div class="center">
      <p class="title">PROJECTIVE SET</p>
    </div>
    <header class="center_buttons">
      <button class="button" id="rules" onclick="showRules()">
        <svg class="icon">
          <use href="/images/icons.svg#icon-rules" />
        </svg>
        SHOW RULES
      </button>
      <button class="button" onclick="showSettings()">
        <svg class="icon">
          <use href="/images/icons.svg#icon-settings" />
        </svg>
        SETTINGS
      </button>
      <log-in-button></log-in-button>
    </header>

    <main-game></main-game>

    <rule-box id="rule-box"></rule-box>

    <settings-box id="settings-box"></settings-box>
  </body>
</html>
